<?xml version="1.0"?>
<aestate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="aestate  https://gitee.com/cacode_cctvadmin/aestate-xml/blob/main/v1/tags.xsd"
         xmlns="aestate">
    <import file="./db.xml" id="database" element="a"/>
    <database id="demoDatabase" chaeset="utf8">
        <host>127.0.0.1</host>
        <port>3306</port>
        <user>root</user>
        <password>123456</password>
        <name>_demo</name>
        <charset>utf8</charset>
        <description>demo数据库</description>
    </database>
    <template id="templateField">
        d1.id,d1.`name`,d1.`password`
        <description>测试模板</description>
    </template>
    <!-- 模板if语句 -->
    <template id="tempSymbol">
        <if test="#{id}=1">#{flag}=0</if>
        <elif test="#{id}=2">#{flag}=1</elif>
        <elif test="#{id}=3">#{flag}=2</elif>
        <else>#{flag}=3</else>
    </template>
    <template id="tempWhereId">
        <where>
            id=#{id}
        </where>
    </template>
    <resultMap id="resultMapLeftJoin" type="list->example.table.demoModels.Demo" file="xb.att">
        <!--
        list->example.table.demoModels.Demo
            int->id
            str->name
            str->password
            list->example.table.demoModels.Demo(demo_key)
                int->id
                str->name
                str->password
        -->
        <result field="id" properties="id"/>
        <result field="name" properties="name"/>
        <result field="password" properties="password"/>

        <foreignKey type="list->example.table.demoModels.Demo">
            <result field="a_id" properties="id"/>
            <result field="a_name" properties="name"/>
            <result field="a_password" properties="password"/>
        </foreignKey>
    </resultMap>
    <!--用外部语法的resultMap-->
    <resultMap id="resultMapFile" file="xb.att->left_join_key">
        <!--
        list->example.table.demoModels.Demo
            int->id
            str->name
            str->password
            list->example.table.demoModels.Demo(demo_key)
                int->id
                str->name
                str->password
        -->
    </resultMap>
    <item id="findAllById" name="findAllByIdName">
        <select resultType="resultMapLeftJoin">
            SELECT
            <!-- 导入查询的字段 -->
            <include from="templateField"/>
            FROM demo as d1 LEFT JOIN demo as d2 ON d2.id = d1.id WHERE d1.id >
            <switch field="id">
                <case value="10">10</case>
                <case value="5">5</case>
                <default>#{id}</default>
            </switch>
            <if test="#{id}&gt;=20">AND d2.id > 20</if>
            <else>AND d2.id > 10</else>
        </select>
    </item>
    <description>
        描述
    </description>
</aestate>
