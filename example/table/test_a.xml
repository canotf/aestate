<?xml version="1.0"?>
<aestate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="aestate  https://gitee.com/cacode_cctvadmin/aestate-xml/blob/main/v1/tags.xsd"
         xmlns="aestate">
    <import file="./db.xml" id="database" element="a"/>
    <database id="demoDatabase" charset="utf8">
        <host>
            127.0.0.1
        </host>
        <port>
            3306
        </port>
        <user>
            root
        </user>
        <password>
            123456
        </password>
        <name>
            _demo
        </name>
        <description>
            demo数据库
        </description>
    </database>
    <template id="templateField">
        id,name,password,create_time,update_time
        <description>
            测试模板
        </description>
    </template>
    <!-- 模板if语句 -->
    <template id="tempSymbol">
        <if test="#{id}=1">
            #{flag}=0
        </if>
        <elif test="#{id}=2">
            #{flag}=1
        </elif>
        <elif test="#{id}=3">
            #{flag}=2
        </elif>
        <else>
            #{flag}=3
        </else>
    </template>
    <template id="tempWhereId">
        <where>
            id=#{id}
        </where>
    </template>
    <resultMap id="resultMapLeftJoin">
        <result field="id" properties="id"/>
        <result field="name" properties="name"/>
        <result field="password" properties="password"/>
        <foreignKey type="example.table.demoModels.Demo">
            <result field="id" properties="id"/>
            <result field="name" properties="name"/>
            <result field="password" properties="password"/>
        </foreignKey>
    </resultMap>
    <item id="findAllById" name="findAllByIdName">
        <select resultType="resultMapLeftJoin">
            SELECT
            <!-- 导入查询的字段 -->
            <include from="templateField"/>
            FROM demo_table
            <!-- 导入if语句和传入模板所需要的参数 -->
            <include from="tempWhereId"/>
            AND
            <if test="">
                #{id} = 0
            </if>
            <elif test="">
                #{p1} = 1
            </elif>
            <else>

            </else>
            LEFT JOIN
            <!-- 这个#{this}表示当前表 -->
            ON #{alias_demo}.id = #{this}.id
            <where>
                id >
                <switch field="id">
                    <case value="1">
                        3
                    </case>
                    <case value="1">
                        3
                    </case>
                    <default>
                        3
                    </default>
                </switch>
            </where>
        </select>
    </item>
    <description>
        描述
    </description>
</aestate>
