\hypertarget{classaestate_1_1work_1_1repository_1_1_repository}{}\doxysection{aestate.\+work.\+repository.\+Repository类 参考}
\label{classaestate_1_1work_1_1repository_1_1_repository}\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}}


类 aestate.\+work.\+repository.\+Repository 继承关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d97/classaestate_1_1work_1_1repository_1_1_repository__inherit__graph}
\end{center}
\end{figure}


aestate.\+work.\+repository.\+Repository 的协作图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=214pt]{d6/d11/classaestate_1_1work_1_1repository_1_1_repository__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_ad66c073ae1c84d39f2868e43c43bc189}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, config\+\_\+obj=None, instance=None, log\+\_\+conf=None, close\+\_\+log=False, serializer=\mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}}, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a23a9cc8dca79ab503ab2537c8d29e975}{conversion}} (self)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a9a3ea0e3484460a8dc08a43f54e9a809}{first}} (self)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a7b0fadba8d270423923ecedb012565c9}{last}} (self)
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a3424c501b017a48c7ccfc1f31d8dee1d}{find\+\_\+all}} (self, $\ast$$\ast$kwargs)
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a8c81f4cc1f19e32a669a66adb72cc388}{find\+\_\+field}} (self, $\ast$args, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a9de20f0ad54da7c1b6ab8bc7e3f28ec2}{find\+\_\+one}} (self, sql, $\ast$$\ast$kwargs)
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_ac4957e544a6e7b5fce766d015395823c}{find\+\_\+many}} (self, sql, $\ast$$\ast$kwargs)
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a0087bc5f425b10dddd4f8a27f98bd6dc}{find\+\_\+sql}} (self, sql, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a6451c2ce3e3119f33943bd802aa738a4}{update}} (self, key=None)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_acc24119ecb4a0a7eebb54faf1dc81632}{remove}} (self, key=None)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a5e48e6c99c9c38c5280bf4d7e6a949ed}{save}} (self, $\ast$args, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_aedb01a6a9d72679a9560b7ca97e93a67}{create}} (self, pojo, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a6fb8096830e2df1bed24cd94f5f4919b}{copy}} (self, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a4502a56b17fa50cecefeec9b5c69afab}{execute\+\_\+sql}} (self, sql, params=None, mode=\mbox{\hyperlink{classaestate_1_1work_1_1_modes_1_1_e_x___m_o_d_e_l_a2ae38bbd2e12179f466df27ecb10974f}{E\+X\+\_\+\+M\+O\+D\+E\+L.\+S\+E\+L\+E\+CT}}, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a547fcd05dbc50a7544d307e6b407e596}{foreign\+\_\+key}} (self, cls, key\+\_\+name, field\+\_\+name=None, data=None, operation=None)
\end{DoxyCompactItemize}
\doxysubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_ad6ade0a364a6d26b9217c64afe2cf135}{Parse\+Util}}
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_a4fe8925d2fe118234b92067560e96a2c}{db\+\_\+util}}
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_ab269e249ed16a1b870cfab7825a94727}{result}}
\item 
\mbox{\hyperlink{classaestate_1_1work_1_1repository_1_1_repository_ad7eae41f8776e1aff71d662b66cc57da}{datas}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\begin{DoxyVerb}- POJO类
    - 继承该类表名此类为数据库的pojo类
    - 需要配合:@Table(name, msg, **kwargs)使用
\end{DoxyVerb}
 

在文件 repository.\+py 第 16 行定义.



\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_ad66c073ae1c84d39f2868e43c43bc189}\label{classaestate_1_1work_1_1repository_1_1_repository_ad66c073ae1c84d39f2868e43c43bc189}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{config\+\_\+obj = {\ttfamily None},  }\item[{}]{instance = {\ttfamily None},  }\item[{}]{log\+\_\+conf = {\ttfamily None},  }\item[{}]{close\+\_\+log = {\ttfamily False},  }\item[{}]{serializer = {\ttfamily \mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}}},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}通过继承此类将数据表实体化

    实体化之后你可以使用像类似find_one()等操做

    可以调用conversion()方法将其转化为ORM框架常用的样式

    无需担心类型问题，无需担心datetime无法转换
使用方法:
    #加入Table注解，并标注表名与描述，因考虑使用者后期优化问题，请务必填写MSG参数

    @Table(name="demo_table", msg="demo message")

    #继承Repository并得到相对应的半自动ORM操做
    class TestClass(Repository):
# 初始化并super配置
def __init__(self,**kwargs):
    super(DemoTable, self).__init__(config_obj=ConF(), log_conf={
        'path': "/log/",
        'save_flag': True
    }, **kwargs)

初始化配置:

    aestate.util.Config.config的配置类,详见:aestate.work.Config.MysqlConfig

Attributes:
    以下的字段均可覆盖重写

    config_obj:数据源配置类

    log_conf:日志配置工具

    log_obj:日志对象

    close_log:是否关闭日志

    serializer:序列化使用的类,默认使用aestate.work.Serialize.QuerySet

    instance:实例

    __table_name__:表名称

    operation:操作类的实现

    fields:操作的字段

    sqlFields:sql方言

:param config_obj:配置类
:param log_conf:日志配置类
:param close_log:是否关闭日志显示功能
:param serializer:自定义序列化器,默认使用aestate.work.Serialize.QuerySet
\end{DoxyVerb}
 

在文件 repository.\+py 第 23 行定义.



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a23a9cc8dca79ab503ab2537c8d29e975}\label{classaestate_1_1work_1_1repository_1_1_repository_a23a9cc8dca79ab503ab2537c8d29e975}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!conversion@{conversion}}
\index{conversion@{conversion}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{conversion()}{conversion()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+conversion (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}将此Repository转换为ORM实体

Return:
    ORM转换之后的实体对象
\end{DoxyVerb}
 

在文件 repository.\+py 第 132 行定义.

这是这个函数的调用关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a23a9cc8dca79ab503ab2537c8d29e975_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a6fb8096830e2df1bed24cd94f5f4919b}\label{classaestate_1_1work_1_1repository_1_1_repository_a6fb8096830e2df1bed24cd94f5f4919b}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!copy@{copy}}
\index{copy@{copy}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{copy()}{copy()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+copy (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}复制对象进行操做

不建议多次创建对象，建议使用 pojo.copy()来生成对象
\end{DoxyVerb}
 

在文件 repository.\+py 第 365 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_aedb01a6a9d72679a9560b7ca97e93a67}\label{classaestate_1_1work_1_1repository_1_1_repository_aedb01a6a9d72679a9560b7ca97e93a67}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!create@{create}}
\index{create@{create}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{create()}{create()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+create (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{pojo,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}插入属性:
    返回受影响行数
:param kwargs:包含所有参数:
    pojo:参照对象
    last_id:是否需要返回最后一行数据,默认False
:return:rowcount,last_id if last_id=True
\end{DoxyVerb}
 

在文件 repository.\+py 第 346 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_aedb01a6a9d72679a9560b7ca97e93a67_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_aedb01a6a9d72679a9560b7ca97e93a67_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a4502a56b17fa50cecefeec9b5c69afab}\label{classaestate_1_1work_1_1repository_1_1_repository_a4502a56b17fa50cecefeec9b5c69afab}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!execute\_sql@{execute\_sql}}
\index{execute\_sql@{execute\_sql}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{execute\_sql()}{execute\_sql()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+execute\+\_\+sql (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{sql,  }\item[{}]{params = {\ttfamily None},  }\item[{}]{mode = {\ttfamily \mbox{\hyperlink{classaestate_1_1work_1_1_modes_1_1_e_x___m_o_d_e_l_a2ae38bbd2e12179f466df27ecb10974f}{E\+X\+\_\+\+M\+O\+D\+E\+L.\+S\+E\+L\+E\+CT}}},  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}:param sql:执行的sql
:param params:防止sql注入的参数
:param mode:查询模式,默认使用SELECT,使用aestate.work.Modes.EX_MODEL枚举修改执行的sql类型
:param kwargs:其他需要的参数
\end{DoxyVerb}
 

在文件 repository.\+py 第 375 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a3424c501b017a48c7ccfc1f31d8dee1d}\label{classaestate_1_1work_1_1repository_1_1_repository_a3424c501b017a48c7ccfc1f31d8dee1d}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!find\_all@{find\_all}}
\index{find\_all@{find\_all}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{find\_all()}{find\_all()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} aestate.\+work.\+repository.\+Repository.\+find\+\_\+all (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}从当前数据表格中查找所有数据

Returns:
    将所有结果封装成POJO对象集合并返回数据
\end{DoxyVerb}
 

在文件 repository.\+py 第 153 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a8c81f4cc1f19e32a669a66adb72cc388}\label{classaestate_1_1work_1_1repository_1_1_repository_a8c81f4cc1f19e32a669a66adb72cc388}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!find\_field@{find\_field}}
\index{find\_field@{find\_field}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{find\_field()}{find\_field()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} aestate.\+work.\+repository.\+Repository.\+find\+\_\+field (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{$\ast$}]{args,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}只查询指定名称的字段,如:

    SELECT user_name FROM `user`

    即可参与仅解析user_name为主的POJO对象

:param args:需要参与解析的字段名

:return:
    将所有结果封装成POJO对象集合并返回数据\end{DoxyVerb}
 

在文件 repository.\+py 第 164 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a8c81f4cc1f19e32a669a66adb72cc388_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_ac4957e544a6e7b5fce766d015395823c}\label{classaestate_1_1work_1_1repository_1_1_repository_ac4957e544a6e7b5fce766d015395823c}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!find\_many@{find\_many}}
\index{find\_many@{find\_many}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{find\_many()}{find\_many()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} aestate.\+work.\+repository.\+Repository.\+find\+\_\+many (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{sql,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}查询出多行数据

    第一个必须放置sql语句

:param kwargs:包含所有参数:

    pojo:参照对象

    sql:处理过并加上%s的sql语句

    params:需要填充的字段

    print_sql:是否打印sql语句

:return 将所有数据封装成POJO对象并返回\end{DoxyVerb}
 

在文件 repository.\+py 第 231 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_ac4957e544a6e7b5fce766d015395823c_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_ac4957e544a6e7b5fce766d015395823c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a9de20f0ad54da7c1b6ab8bc7e3f28ec2}\label{classaestate_1_1work_1_1repository_1_1_repository_a9de20f0ad54da7c1b6ab8bc7e3f28ec2}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!find\_one@{find\_one}}
\index{find\_one@{find\_one}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{find\_one()}{find\_one()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+find\+\_\+one (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{sql,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}查找第一条数据

    可以是一条

    也可以是很多条中的第一条

code:

    result = self.find_many(**kwargs)
    if len(result) == 0:
return None
    else:
return result[0]

:param kwargs:包含所有参数:

    pojo:参照对象

    sql:处理过并加上%s的sql语句

    params:需要填充的字段

    print_sql:是否打印sql语句

:return 返回使用find_many()的结果种第一条
\end{DoxyVerb}
 

在文件 repository.\+py 第 194 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a9de20f0ad54da7c1b6ab8bc7e3f28ec2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a0087bc5f425b10dddd4f8a27f98bd6dc}\label{classaestate_1_1work_1_1repository_1_1_repository_a0087bc5f425b10dddd4f8a27f98bd6dc}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!find\_sql@{find\_sql}}
\index{find\_sql@{find\_sql}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{find\_sql()}{find\_sql()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classaestate_1_1work_1_1_serialize_1_1_query_set}{Query\+Set}} aestate.\+work.\+repository.\+Repository.\+find\+\_\+sql (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{sql,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}返回多个数据并用list包装:

    - 可自动化操作

    - 请尽量使用find_many(sql)操作

:param kwargs:包含所有参数:
    sql:处理过并加上%s的sql语句
    params:需要填充的字段
    print_sql:是否打印sql语句
\end{DoxyVerb}
 

在文件 repository.\+py 第 262 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a0087bc5f425b10dddd4f8a27f98bd6dc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a9a3ea0e3484460a8dc08a43f54e9a809}\label{classaestate_1_1work_1_1repository_1_1_repository_a9a3ea0e3484460a8dc08a43f54e9a809}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!first@{first}}
\index{first@{first}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{first()}{first()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+first (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}获取数据库中的第一个
\end{DoxyVerb}
 

在文件 repository.\+py 第 141 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a9a3ea0e3484460a8dc08a43f54e9a809_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a9a3ea0e3484460a8dc08a43f54e9a809_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a547fcd05dbc50a7544d307e6b407e596}\label{classaestate_1_1work_1_1repository_1_1_repository_a547fcd05dbc50a7544d307e6b407e596}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!foreign\_key@{foreign\_key}}
\index{foreign\_key@{foreign\_key}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{foreign\_key()}{foreign\_key()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+foreign\+\_\+key (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{cls,  }\item[{}]{key\+\_\+name,  }\item[{}]{field\+\_\+name = {\ttfamily None},  }\item[{}]{data = {\ttfamily None},  }\item[{}]{operation = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}根据外键来查

Examples:
    第一种：

    >>> from apps.fontend.models import  Label, SmLabel
    >>> smlabel = SmLabel()
    >>> label = Label()
    >>> label.find_all()
    >>> label.foreign_key(smlabel.copy, 'label_id')
    >>> datas = label.datas

    第二种：

    >>> page = int(requests.GET['page']) \
    ...         if 'page' in requests.GET.keys() \
    ...         else 1
    ...
    >>> sm_label_list = sm_label.orm.filter(id=pk)
    >>> sm_label.foreign_key(
    ...    cls=need.copy,
    ...    key_name='label_id',
    ...    field_name="need_list",
    ...    datas=sm_label_list,
    ...    operation=lambda dt, i: need.orm
    ...        .find()
    ...        .where(label_id=dt[i].id)
    ...        .limit((page - 1) * PAGE_SIZE, PAGE_SIZE)
    ...        .end()
    ...)
    >>> need_list = sm_label.datas
    >>> return Result.success(data=need_list.to_dict())


:param cls:目标外键的类，注意不是对象，是类
:param key_name:外键的id
:param field_name:保存进去的字段名字，默认以表名命名
:param data:使用已有的数据作为外键
:param operation:自定义操作
\end{DoxyVerb}
 

在文件 repository.\+py 第 389 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a7b0fadba8d270423923ecedb012565c9}\label{classaestate_1_1work_1_1repository_1_1_repository_a7b0fadba8d270423923ecedb012565c9}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!last@{last}}
\index{last@{last}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{last()}{last()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+last (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}获取最后一个参数
\end{DoxyVerb}
 

在文件 repository.\+py 第 147 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a7b0fadba8d270423923ecedb012565c9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_acc24119ecb4a0a7eebb54faf1dc81632}\label{classaestate_1_1work_1_1repository_1_1_repository_acc24119ecb4a0a7eebb54faf1dc81632}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!remove@{remove}}
\index{remove@{remove}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+remove (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}执行更新操作:
    返回受影响行数

:param key:主键，where的参考数据
:return:
\end{DoxyVerb}
 

在文件 repository.\+py 第 314 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_acc24119ecb4a0a7eebb54faf1dc81632_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a5e48e6c99c9c38c5280bf4d7e6a949ed}\label{classaestate_1_1work_1_1repository_1_1_repository_a5e48e6c99c9c38c5280bf4d7e6a949ed}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!save@{save}}
\index{save@{save}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+save (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{$\ast$}]{args,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}将当前储存的值存入数据库
\end{DoxyVerb}
 

在文件 repository.\+py 第 339 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a5e48e6c99c9c38c5280bf4d7e6a949ed_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a6451c2ce3e3119f33943bd802aa738a4}\label{classaestate_1_1work_1_1repository_1_1_repository_a6451c2ce3e3119f33943bd802aa738a4}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!update@{update}}
\index{update@{update}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily def aestate.\+work.\+repository.\+Repository.\+update (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{key = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}执行更新操作:
    返回受影响行数

:param key:主键，where的参考数据
:return:
\end{DoxyVerb}
 

在文件 repository.\+py 第 289 行定义.

函数调用图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=329pt]{df/dc4/classaestate_1_1work_1_1repository_1_1_repository_a6451c2ce3e3119f33943bd802aa738a4_cgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_ad7eae41f8776e1aff71d662b66cc57da}\label{classaestate_1_1work_1_1repository_1_1_repository_ad7eae41f8776e1aff71d662b66cc57da}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!datas@{datas}}
\index{datas@{datas}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{datas}{datas}}
{\footnotesize\ttfamily aestate.\+work.\+repository.\+Repository.\+datas}



在文件 repository.\+py 第 436 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_a4fe8925d2fe118234b92067560e96a2c}\label{classaestate_1_1work_1_1repository_1_1_repository_a4fe8925d2fe118234b92067560e96a2c}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!db\_util@{db\_util}}
\index{db\_util@{db\_util}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{db\_util}{db\_util}}
{\footnotesize\ttfamily aestate.\+work.\+repository.\+Repository.\+db\+\_\+util}



在文件 repository.\+py 第 121 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_ad6ade0a364a6d26b9217c64afe2cf135}\label{classaestate_1_1work_1_1repository_1_1_repository_ad6ade0a364a6d26b9217c64afe2cf135}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!ParseUtil@{ParseUtil}}
\index{ParseUtil@{ParseUtil}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{ParseUtil}{ParseUtil}}
{\footnotesize\ttfamily aestate.\+work.\+repository.\+Repository.\+Parse\+Util}



在文件 repository.\+py 第 83 行定义.

\mbox{\Hypertarget{classaestate_1_1work_1_1repository_1_1_repository_ab269e249ed16a1b870cfab7825a94727}\label{classaestate_1_1work_1_1repository_1_1_repository_ab269e249ed16a1b870cfab7825a94727}} 
\index{aestate.work.repository.Repository@{aestate.work.repository.Repository}!result@{result}}
\index{result@{result}!aestate.work.repository.Repository@{aestate.work.repository.Repository}}
\doxysubsubsection{\texorpdfstring{result}{result}}
{\footnotesize\ttfamily aestate.\+work.\+repository.\+Repository.\+result}



在文件 repository.\+py 第 161 行定义.



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/home/cacode/桌面/\+Aestate\+Framework/aestate/work/\mbox{\hyperlink{repository_8py}{repository.\+py}}\end{DoxyCompactItemize}
